parameters:
  platform: ''  
  defaultTestParams: '--configuration $(BuildConfiguration) -p:ParallelizeTestCollections=false'
  conditionNoArguments: eq(variables['AdditionalIntegrationTestArguments'], '')

steps:
- task: DotNetCoreCLI@2
  displayName: Test
  condition: ${{ parameters.conditionNoArguments }}
  inputs:
    command: test
    projects: '**/*[Tt]ests/*.csproj'
    arguments: '${{ parameters.defaultTestParams }}'
